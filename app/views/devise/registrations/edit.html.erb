<% set_meta_tags title: t('.title')  %>
<div class="flex items-center justify-center px-4">
  <div class="mt-20 max-w-3xl w-full bg-white rounded-2xl shadow-lg overflow-hidden p-8">
    <h2 class="text-center text-2xl sm:text-3xl font-semibold tracking-tight text-teal-600 mb-6">
      <%= t('.title') %>
    </h2>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: "space-y-4" }) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <div>
        <%= f.label :username, class: "block text-lg sm:text-xl font-medium text-gray-700" %>
        <%= f.text_field :username, placeholder: t('activerecord.attributes.user.username'), autofocus: true, autocomplete: "username",
              class: "mt-2 block w-full rounded-full bg-white px-4 py-3 text-base text-gray-900 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500" %>
      </div>

      <div>
        <%= f.label :email, class: "block text-lg sm:text-xl font-medium text-gray-700" %>
        <%= f.email_field :email, placeholder: "example@example.com", autocomplete: "email",
              class: "mt-2 block w-full rounded-full bg-white px-4 py-3 text-base text-gray-900 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gring-teal-500" %>
      </div>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %> 
        <div class="text-center text-sm text-gray-600 mt-2">
          <%= t('.current_email') %>: <%= resource.unconfirmed_email %>
        </div>
      <% end %>

      <div>
        <%= f.submit t('.update'), class: "w-full flex justify-center rounded-full bg-teal-500 px-4 py-3 text-base font-semibold text-white shadow-md hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-teal-500" %>
      </div>
    <% end %>

    <div class="mt-8 border-t border-gray-200 pt-6 text-center space-y-4">
      <div>
        <%= form_with url: registration_path(resource_name), method: :delete, html: { id: "delete-account-form" } do %>
          <button type="button" onclick="confirmDelete()" class="text-red-600 hover:text-red-500 text-base hover:underline">
            <%= t('.cancel_my_account') %>
          </button>
        <% end %>
      </div>

      <div>
        <%= link_to t('.toppage'), root_path, class: 'text-lg text-blue-500 font-semibold hover:text-blue-400 hover:underline' %>
      </div>
    </div>

    <script>
      function confirmDelete() {
        if (confirm("本当にアカウントを削除しますか？")) {
          document.getElementById("delete-account-form").submit();
        }
      }
    </script>
  </div>    
</div>
